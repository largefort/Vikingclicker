<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Viking Clicker</title>
    <style>
        body {
            font-family: 'Fenrir Gothic', sans-serif;
            background: linear-gradient(180deg, blue, green);
            color: white;
        }

        .resource, .worker {
            margin: 10px;
        }

        .click-effect {
            position: absolute;
            font-size: 24px;
            transition: transform 1s, opacity 1s;
        }

        @media screen and (max-width: 360px) {
            /* CSS rules for small screens (<= 360px) */
        }
    </style>
</head>

<body>
    <div class="resource" id="wood">Wood: 0</div>
    <div class="resource" id="stone">Stone: 0</div>
    <div class="resource" id="gold">Gold: 0</div>

    <button onclick="gather('wood')">Gather Wood</button>
    <button onclick="gather('stone')">Gather Stone</button>
    <button onclick="gather('gold')">Gather Gold</button>

    <div class="worker">
        <div id="vikingCount">0</div>
        <button onclick="hire('viking')">Hire Viking</button>
    </div>

    <div class="worker">
        <div id="stonemasonCount">0</div>
        <button onclick="hire('stonemason')">Hire Stonemason</button>
    </div>

    <div class="worker">
        <div id="minerCount">0</div>
        <button onclick="hire('miner')">Hire Miner</button>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/fabiospampinato/tinydate@2.0.0/dist/tinydate.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>

    <script>
        var resources = {
            wood: 0,
            stone: 0,
            gold: 0
        };

        var workers = {
            viking: 0,
            stonemason: 0,
            miner: 0
        };

        var workerYields = {
            viking: { wood: 1 },
            stonemason: { stone: 1 },
            miner: { gold: 1 }
        };

        function gather(type) {
            resources[type] += 1;
            document.getElementById(type).textContent = type.charAt(0).toUpperCase() + type.slice(1) + ': ' + numeral(resources[type]).format('0a');

            var effect = document.createElement('div');
            effect.textContent = '+1';
            effect.className = 'click-effect';
            effect.style.left = event.clientX + 'px';
            effect.style.top = event.clientY + 'px';
            document.body.appendChild(effect);

            setTimeout(() => {
                effect.style.transform = 'translateY(-20px)';
                effect.style.opacity = '0';
            }, 50);
            setTimeout(() => {
                document.body.removeChild(effect);
            }, 1050);

            saveGame();
        }

        function hire(type) {
            if (resources[type] >= (workers[type] + 1) * 10) {
                resources[type] -= (workers[type] + 1) * 10;
                workers[type] += 1;

                document.getElementById(type).textContent = type.charAt(0).toUpperCase() + type.slice(1) + ': ' + numeral(resources[type]).format('0a');
                document.getElementById(type + 'Count').textContent = workers[type];

                setInterval(() => {
                    const yields = workerYields[type];
                    Object.keys(yields).forEach(resource => {
                        resources[resource] += yields[resource] * workers[type];
                        document.getElementById(resource).textContent = resource.charAt(0).toUpperCase() + resource.slice(1) + ': ' + numeral(resources[resource]).format('0a');
                    });
                    saveGame();
                }, 1000);
            }
        }

        function saveGame() {
            var gameData = {
                resources: {
                    wood: resources.wood,
                    stone: resources.stone,
                    gold: resources.gold
                },
                workers: {
                    viking: workers.viking,
                    stonemason: workers.stonemason,
                    miner: workers.miner
                }
            };
            localStorage.setItem('gameData', JSON.stringify(gameData));
        }

        if (localStorage.getItem('gameData')) {
            var gameData = JSON.parse(localStorage.getItem('gameData'));
            resources.wood = gameData.resources.wood;
            resources.stone = gameData.resources.stone;
            resources.gold = gameData.resources.gold;
            workers.viking = gameData.workers.viking;
            workers.stonemason = gameData.workers.stonemason;
            workers.miner = gameData.workers.miner;

            document.getElementById('wood').textContent = 'Wood: ' + numeral(resources.wood).format('0a');
            document.getElementById('stone').textContent = 'Stone: ' + numeral(resources.stone).format('0a');
            document.getElementById('gold').textContent = 'Gold: ' + numeral(resources.gold).format('0a');
            document.getElementById('vikingCount').textContent = workers.viking;
            document.getElementById('stonemasonCount').textContent = workers.stonemason;
            document.getElementById('minerCount').textContent = workers.miner;

            Object.keys(workers).forEach(type => {
                setInterval(() => {
                    const yields = workerYields[type];
                    Object.keys(yields).forEach(resource => {
                        resources[resource] += yields[resource] * workers[type];
                        document.getElementById(resource).textContent = resource.charAt(0).toUpperCase() + resource.slice(1) + ': ' + numeral(resources[resource]).format('0a');
                    });
                    saveGame();
                }, 1000);
            });
        }
    </script>
</body>
</html>

